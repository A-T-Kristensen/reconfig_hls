puts "#HD: Running synthesis for block filterbank"
puts "	#HD: Setting Tcl Params:"
set_param hd.visual 0
create_project -in_memory -part xc7a100tcsg324-1
add_files ./sources/hdl/HWA_PACKAGE_FILTERBANK.vhd
set_property LIBRARY work [get_files ./sources/hdl/HWA_PACKAGE_FILTERBANK.vhd]
add_files ./sources/hdl/recon_filterbank.vhd
set_property LIBRARY work [get_files ./sources/hdl/recon_filterbank.vhd]
add_files ./sources/hdl/n_bank_filterbank.vhd
set_property LIBRARY work [get_files ./sources/hdl/n_bank_filterbank.vhd]
add_files ./sources/hdl/bram_tdp.vhd
set_property LIBRARY work [get_files ./sources/hdl/bram_tdp.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_hwa.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_hwa.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_hbkb.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_hbkb.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_hcud.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_hcud.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_hdEe.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_hdEe.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_heOg.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_heOg.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_hfYi.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_hfYi.vhd]
add_files ./sources/hdl/filterbank/filterbank_core_hg8j.vhd
set_property LIBRARY work [get_files ./sources/hdl/filterbank/filterbank_core_hg8j.vhd]
add_files ./sources/hdl/filterbank_core_hwa_ap_fadd_3_full_dsp_32/filterbank_core_hwa_ap_fadd_3_full_dsp_32.xci
set_property LIBRARY work [get_files ./sources/hdl/filterbank_core_hwa_ap_fadd_3_full_dsp_32/filterbank_core_hwa_ap_fadd_3_full_dsp_32.xci]
add_files ./sources/hdl/filterbank_core_hwa_ap_fmul_2_max_dsp_32/filterbank_core_hwa_ap_fmul_2_max_dsp_32.xci
set_property LIBRARY work [get_files ./sources/hdl/filterbank_core_hwa_ap_fmul_2_max_dsp_32/filterbank_core_hwa_ap_fmul_2_max_dsp_32.xci]
synth_design -mode out_of_context -flatten_hierarchy rebuilt -top recon_matrix -part xc7a100tcsg324-1
write_checkpoint -force ./synth/filterbank/recon_matrix_synth.dcp
report_utilization -file ./synth/filterbank/recon_matrix_utilization_synth.rpt
close_project
puts "#HD: Synthesis of module filterbank complete\n"
puts "#HD: Running synthesis for block fir2dim"
puts "	#HD: Setting Tcl Params:"
set_param hd.visual 0
create_project -in_memory -part xc7a100tcsg324-1
add_files ./sources/hdl/HWA_PACKAGE_FIR2DIM.vhd
set_property LIBRARY work [get_files ./sources/hdl/HWA_PACKAGE_FIR2DIM.vhd]
add_files ./sources/hdl/recon_fir2dim.vhd
set_property LIBRARY work [get_files ./sources/hdl/recon_fir2dim.vhd]
add_files ./sources/hdl/n_bank_fir2dim.vhd
set_property LIBRARY work [get_files ./sources/hdl/n_bank_fir2dim.vhd]
add_files ./sources/hdl/bram_tdp.vhd
set_property LIBRARY work [get_files ./sources/hdl/bram_tdp.vhd]
add_files ./sources/hdl/fir2dim/fir2dim_hwa_fadd_bkb.vhd
set_property LIBRARY work [get_files ./sources/hdl/fir2dim/fir2dim_hwa_fadd_bkb.vhd]
add_files ./sources/hdl/fir2dim/fir2dim_hwa_fmul_cud.vhd
set_property LIBRARY work [get_files ./sources/hdl/fir2dim/fir2dim_hwa_fmul_cud.vhd]
add_files ./sources/hdl/fir2dim/fir2dim_hwa.vhd
set_property LIBRARY work [get_files ./sources/hdl/fir2dim/fir2dim_hwa.vhd]
add_files ./sources/hdl/fir2dim_hwa_ap_fadd_3_full_dsp_32/fir2dim_hwa_ap_fadd_3_full_dsp_32.xci
set_property LIBRARY work [get_files ./sources/hdl/fir2dim_hwa_ap_fadd_3_full_dsp_32/fir2dim_hwa_ap_fadd_3_full_dsp_32.xci]
add_files ./sources/hdl/fir2dim_hwa_ap_fmul_2_max_dsp_32/fir2dim_hwa_ap_fmul_2_max_dsp_32.xci
set_property LIBRARY work [get_files ./sources/hdl/fir2dim_hwa_ap_fmul_2_max_dsp_32/fir2dim_hwa_ap_fmul_2_max_dsp_32.xci]
synth_design -mode out_of_context -flatten_hierarchy rebuilt -top recon_matrix -part xc7a100tcsg324-1
write_checkpoint -force ./synth/fir2dim/recon_matrix_synth.dcp
report_utilization -file ./synth/fir2dim/recon_matrix_utilization_synth.rpt
close_project
puts "#HD: Synthesis of module fir2dim complete\n"
file mkdir ./implement
file delete -force ./implement/config_filterbank_implement
file mkdir ./implement/config_filterbank_implement
file mkdir ./implement/config_filterbank_implement/reports
puts "#HD: Running implementation config_filterbank_implement"
puts "	#HD: Setting Tcl Params:"
set_param hd.visual 0
create_project -in_memory -part xc7a100tcsg324-1
add_files ./synth/Static/patmos_top_synth.dcp
add_files ./sources/xdc/nexys4ddr.xdc
set_property USED_IN {implementation} [get_files ./sources/xdc/nexys4ddr.xdc]
add_files ./sources/xdc/pblocks.xdc
set_property USED_IN {implementation} [get_files ./sources/xdc/pblocks.xdc]
add_files ./sources/hdl/clk_manager/clk_manager.xdc
set_property USED_IN {implementation} [get_files ./sources/hdl/clk_manager/clk_manager.xdc]
add_files ./sources/hdl/ddr2_ctrl/constraints/ddr2_ctrl.xdc
set_property USED_IN {implementation} [get_files ./sources/hdl/ddr2_ctrl/constraints/ddr2_ctrl.xdc]
add_files ./sources/hdl/ddr2_ctrl/constraints/ddr2_ctrl_ooc.xdc
set_property USED_IN {implementation out_of_context} [get_files ./sources/hdl/ddr2_ctrl/constraints/ddr2_ctrl_ooc.xdc]
link_design -mode default -part xc7a100tcsg324-1 -top patmos_top
set_property HD.RECONFIGURABLE 1 [get_cells recon_matrix_inst_0]
read_checkpoint -cell recon_matrix_inst_0 ./synth/filterbank/recon_matrix_synth.dcp -strict
write_checkpoint -force ./implement/config_filterbank_implement/patmos_top_link_design.dcp
opt_design
puts "	#HD: Completed: opt_design"
write_checkpoint -force ./implement/config_filterbank_implement/patmos_top_opt_design.dcp
place_design
puts "	#HD: Completed: place_design"
write_checkpoint -force ./implement/config_filterbank_implement/patmos_top_place_design.dcp
phys_opt_design
puts "	#HD: Completed: phys_opt_design"
write_checkpoint -force ./implement/config_filterbank_implement/patmos_top_phys_opt_design.dcp
route_design
puts "	#HD: Completed: route_design"
write_checkpoint -force ./implement/config_filterbank_implement/patmos_top_route_design.dcp
report_utilization -file ./implement/config_filterbank_implement/reports/patmos_top_utilization_route_design.rpt
report_route_status -file ./implement/config_filterbank_implement/reports/patmos_top_route_status.rpt
report_timing_summary -delay_type min_max -report_unconstrained -check_timing_verbose -max_paths 10 -input_pins -file ./implement/config_filterbank_implement/reports/patmos_top_timing_summary.rpt
report_drc -ruledeck bitstream_checks -name patmos_top -file ./implement/config_filterbank_implement/reports/patmos_top_drc_bitstream_checks.rpt
debug::report_design_status
write_checkpoint -force -cell recon_matrix_inst_0 ./implement/config_filterbank_implement/pblock_recon_matrix_inst_0_filterbank_route_design.dcp
file copy -force ./implement/config_filterbank_implement/pblock_recon_matrix_inst_0_filterbank_route_design.dcp ./checkpoint
update_design -cell recon_matrix_inst_0 -black_box
lock_design -level routing
write_checkpoint -force ./implement/config_filterbank_implement/patmos_top_static.dcp
file copy -force ./implement/config_filterbank_implement/patmos_top_static.dcp ./checkpoint
close_project
puts "#HD: Implementation config_filterbank_implement complete\n"
file mkdir ./implement
file delete -force ./implement/config_fir2dim_import
file mkdir ./implement/config_fir2dim_import
file mkdir ./implement/config_fir2dim_import/reports
puts "#HD: Running implementation config_fir2dim_import"
puts "	#HD: Setting Tcl Params:"
set_param hd.visual 0
create_project -in_memory -part xc7a100tcsg324-1
add_files ./checkpoint/patmos_top_static.dcp
link_design -mode default -part xc7a100tcsg324-1 -top patmos_top
read_checkpoint -cell recon_matrix_inst_0 ./synth/fir2dim/recon_matrix_synth.dcp -strict
write_checkpoint -force ./implement/config_fir2dim_import/patmos_top_link_design.dcp
opt_design
puts "	#HD: Completed: opt_design"
write_checkpoint -force ./implement/config_fir2dim_import/patmos_top_opt_design.dcp
place_design
puts "	#HD: Completed: place_design"
write_checkpoint -force ./implement/config_fir2dim_import/patmos_top_place_design.dcp
phys_opt_design
puts "	#HD: Completed: phys_opt_design"
write_checkpoint -force ./implement/config_fir2dim_import/patmos_top_phys_opt_design.dcp
route_design
puts "	#HD: Completed: route_design"
write_checkpoint -force ./implement/config_fir2dim_import/patmos_top_route_design.dcp
report_utilization -file ./implement/config_fir2dim_import/reports/patmos_top_utilization_route_design.rpt
report_route_status -file ./implement/config_fir2dim_import/reports/patmos_top_route_status.rpt
report_timing_summary -delay_type min_max -report_unconstrained -check_timing_verbose -max_paths 10 -input_pins -file ./implement/config_fir2dim_import/reports/patmos_top_timing_summary.rpt
report_drc -ruledeck bitstream_checks -name patmos_top -file ./implement/config_fir2dim_import/reports/patmos_top_drc_bitstream_checks.rpt
debug::report_design_status
write_checkpoint -force -cell recon_matrix_inst_0 ./implement/config_fir2dim_import/pblock_recon_matrix_inst_0_fir2dim_route_design.dcp
file copy -force ./implement/config_fir2dim_import/pblock_recon_matrix_inst_0_fir2dim_route_design.dcp ./checkpoint
close_project
puts "#HD: Implementation config_fir2dim_import complete\n"
puts "#HD: Running pr_verify between initial config config_filterbank_implement and subsequent configurations config_fir2dim_import"
pr_verify -full_check -initial ./implement/config_filterbank_implement/patmos_top_route_design.dcp -additional "./implement/config_fir2dim_import/patmos_top_route_design.dcp"
puts "	#HD: Setting Tcl Params:"
set_param hd.visual 0
puts "	#HD: Running write_bitstream on config_filterbank_implement"
open_checkpoint ./implement/config_filterbank_implement/patmos_top_route_design.dcp
set_property BITSTREAM.GENERAL.COMPRESS        TRUE [current_design]
write_bitstream -force -bin_file ./bitstreams/config_filterbank_implement
close_project
puts "	#HD: Running write_bitstream on config_fir2dim_import"
open_checkpoint ./implement/config_fir2dim_import/patmos_top_route_design.dcp
set_property BITSTREAM.GENERAL.COMPRESS        TRUE [current_design]
write_bitstream -force -bin_file ./bitstreams/config_fir2dim_import
close_project
